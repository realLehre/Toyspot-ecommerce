import{a as c,c as f}from"./chunk-JMTCKGXD.js";import{c as p}from"./chunk-BLPDBI5E.js";import{H as o,M as r,R as u,X as l,ab as d,j as h}from"./chunk-RY22DRUR.js";var U=(()=>{let s=class s{constructor(){this.baseUrl=c.apiUrl+"users",this.authService=l(f),this.http=l(p),this.activeAddress=d(null),this.addressSignal=d(null)}getAddress(){return this.addressSignal()?h(this.addressSignal()):this.http.get(`${this.baseUrl}/${this.authService.user()?.id}/address`).pipe(o(3)).pipe(r(t=>{this.addressSignal.set(t)}))}addAddress(t){return this.http.post(`${this.baseUrl}/${this.authService.user()?.id}/address`,t).pipe(r(()=>this.addressSignal.set(null)))}editAddress(t,e){return this.http.patch(`${this.baseUrl}/address/edit/${e}`,t).pipe(r(()=>this.addressSignal.set(null)))}deleteAddress(t){return this.http.delete(`${this.baseUrl}/address/delete/${t}`).pipe(r(()=>this.addressSignal.set(null)))}setAsDefault(t){return this.http.patch(`${this.baseUrl}/${this.authService.user()?.id}/address/default/${t}`,{}).pipe(r(()=>this.addressSignal.set(null)))}phoneNumberValidator(t){let e=t.value||"";return e&&!/^[0-9+-]*$/.test(e)?{invalidPhoneNumber:!0}:null}getLocationInfo(t){let e={city:"",state:"",country:""};return t.forEach(i=>{let n=i.types[0];n==="locality"?e.city=i.long_name:n==="administrative_area_level_1"?e.state=i.long_name:n=="country"&&(e.country=i.long_name)}),e}};s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})();export{U as a};

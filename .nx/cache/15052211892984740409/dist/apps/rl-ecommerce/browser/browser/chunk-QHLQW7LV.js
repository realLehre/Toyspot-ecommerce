import{a as ye}from"./chunk-ZSLJO3II.js";import{a as ve}from"./chunk-NI2KI4SR.js";import{a as fe,b as he}from"./chunk-YUEQJNUU.js";import"./chunk-ZWXXYX3D.js";import{a as xe,b as _e}from"./chunk-N6FCPBOZ.js";import"./chunk-LY6Z3647.js";import"./chunk-YMVSBBTI.js";import"./chunk-JEXPQBO3.js";import"./chunk-HIGJCFN5.js";import"./chunk-BUOL5UUF.js";import"./chunk-XCIH5OP7.js";import{a as E}from"./chunk-73ZKYXDV.js";import{b as re,d as g,g as de,h as ae,l as le,n as me,o as ce,s as pe,u as ue}from"./chunk-HPREADP6.js";import{a as G}from"./chunk-ZFTML6IP.js";import"./chunk-TVXJGPRZ.js";import{a as se,b as oe}from"./chunk-JQIRRWHU.js";import{a as $}from"./chunk-XNVULCNU.js";import{i as ne}from"./chunk-L6YWE27G.js";import"./chunk-JMTCKGXD.js";import{k as ie,m as D,n as j}from"./chunk-BLPDBI5E.js";import{k as ee,q as H,u as te}from"./chunk-BKPILUOD.js";import{$ as T,Ab as S,Db as h,Eb as f,Ib as J,Jb as X,Kb as Z,Mb as a,Nb as C,Ob as M,Qa as O,Ta as d,Vb as F,Wb as v,X as x,Xb as A,ab as N,ba as Q,cc as q,dc as B,hb as p,ja as _,ka as y,kb as m,la as I,ma as V,nb as Y,pb as u,sb as U,tb as W,ua as L,ub as i,va as R,vb as n,wb as c}from"./chunk-RY22DRUR.js";import"./chunk-X5YLR3NI.js";import{a as P,b as z}from"./chunk-ODN5LVDJ.js";var Ae=()=>({width:"25rem"}),Se=()=>({"450px":"90vw"}),we=()=>({width:"18px",border:"3px solid #555555"}),Te=()=>({width:"18px",border:"3px solid #fff"});function Ne(e,o){if(e&1&&(i(0,"span"),a(1),n()),e&2){let l=f();d(),M(" / ",l.address().additionalPhoneNumber," ")}}function Fe(e,o){if(e&1&&(i(0,"p",4)(1,"span",5),a(2,"Extra:"),n(),i(3,"span"),a(4),n()()),e&2){let l=f();d(4),C(l.address().additionalInformation)}}function De(e,o){e&1&&(i(0,"span",8),a(1,"Default Address"),n())}function Ee(e,o){e&1&&c(0,"app-loader",20),e&2&&m("customStyle",v(1,we))}function ke(e,o){if(e&1){let l=S();i(0,"button",19),h("click",function(){_(l);let r=f();return y(r.onSetAsDefault())}),p(1,Ee,1,2,"app-loader",20),i(2,"span"),a(3," Set as Default"),n()()}if(e&2){let l=f();d(),u(l.isLoading()?1:-1)}}function Ie(e,o){e&1&&c(0,"app-loader",20),e&2&&m("customStyle",v(1,Te))}function Ve(e,o){if(e&1){let l=S();i(0,"div",21)(1,"h3",22),a(2," Delete Address? "),n(),i(3,"p",23),a(4," This action can not be reversed! "),n(),i(5,"div",24)(6,"button",25),h("click",function(){_(l);let r=f();return y(r.onDeleteDialogAction("close"))}),a(7," Cancel"),n(),i(8,"button",26),h("click",function(){_(l);let r=f();return y(r.onDeleteAddress())}),p(9,Ie,1,2,"app-loader",20),i(10,"span"),a(11,"Delete"),n()()()()}if(e&2){let l=f();d(9),u(l.isDeleting()?9:-1)}}var ge=(()=>{let o=class o{constructor(){this.addressService=x(E),this.toast=x(G),this.router=x(D),this.address=R.required(),this.showDeleteDialog=N(!1),this.isLoading=N(!1),this.isDeleting=N(!1),this.reloadAddress=L()}onEditAddress(){this.addressService.activeAddress.set(this.address()),this.router.navigate(["/","user","address-management"],{queryParams:{edit:!0}})}onSetAsDefault(){this.isLoading.set(!0),this.addressService.setAsDefault(this.address().id).subscribe({next:t=>{this.isLoading.set(!1),this.toast.showToast({type:"success",message:`${this.address().deliveryAddress} - set as default`}),this.reloadAddress.emit()},error:t=>{this.isLoading.set(!1),console.log(t),this.toast.showToast({type:"error",message:t.error.message})}})}onDeleteAddress(){this.isDeleting.set(!0),this.addressService.deleteAddress(this.address().id).subscribe({next:t=>{this.toast.showToast({type:"success",message:"Address deleted!"}),this.isDeleting.set(!1),this.reloadAddress.emit(),this.showDeleteDialog.set(!1),window.scrollTo({top:70,behavior:"smooth"})},error:t=>{this.toast.showToast({type:"error",message:t.error.message}),this.isDeleting.set(!1)}})}onDeleteDialogAction(t){if(t==="close"){this.showDeleteDialog.set(!1);return}if(this.address().isDefault){this.toast.showToast({type:"error",message:"Default address can not be deleted!"});return}this.showDeleteDialog.set(!0)}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=T({type:o,selectors:[["app-address-card"]],inputs:{address:[1,"address"]},outputs:{reloadAddress:"reloadAddress"},standalone:!0,features:[F],decls:43,vars:15,consts:[[1,"bg-bg_subtle","rounded-lg","shadow-md","p-4","flex","flex-col","h-full","hover:shadow-lg","hover:shadow-border_subtle","hover:scale-105","transform","transition-all","duration-300","ease-in-out"],[1,"flex-grow","flex","flex-col","justify-between","text-sm","mobile:text-base"],[1,"font-medium","text-gray-800"],[1,"space-y-1","mt-2","text-sm"],[1,"text-type_grey","break-words","space-x-1"],[1,"text-type_title_gray","font-medium"],[1,"text-type_caption","text-sm"],[1,"mt-5","flex","justify-between","items-center"],[1,"text-primary","font-medium"],[1,"flex","items-center","space-x-2","text-type_grey","border-type_grey","border","rounded-full","py-1","px-3","hover:text-primary","hover:border-primary","font-medium"],[1,"flex","items-center","space-x-2"],[1,"text-blue-500","hover:text-blue-600","w-6","h-6",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"h-5","w-5","fill-type_grey"],["d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"],[1,"text-red-500","hover:text-red-600","w-6","h-6",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[3,"visible","breakpoints"],["pTemplate","headless"],[1,"flex","items-center","space-x-2","text-type_grey","border-type_grey","border","rounded-full","py-1","px-3","hover:text-primary","hover:border-primary","font-medium",3,"click"],[3,"customStyle"],[1,"p-5","bg-white"],[1,"text-type_title","font-semibold","text-lg","mobile:text-xl","mb-3"],[1,"text-type_grey","text-sm","mobile:text-base","mb-10"],[1,"flex","items-center","space-x-3","justify-between"],[1,"px-4","py-2","bg-transparent","h-11","border-[2px]","border-primary","rounded-md","hover:border-type_grey","text-primary","hover:text-type_grey","flex-1",3,"click"],[1,"px-4","py-2","flex","items-center","justify-center","space-x-2","bg-primary","h-11","text-white","rounded-md","hover:bg-opacity-80","focus:outline-none","disabled:bg-type_grey","flex-1",3,"click"]],template:function(r,s){r&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),a(4),n(),i(5,"div",3)(6,"p",4)(7,"span",5),a(8,"Delivery address:"),n(),i(9,"span"),a(10),n()(),i(11,"p",4)(12,"span",5),a(13,"City:"),n(),i(14,"span"),a(15),n()(),i(16,"p",4)(17,"span",5),a(18,"State:"),n(),i(19,"span"),a(20),n()(),i(21,"p",4)(22,"span",5),a(23,"Country:"),n(),i(24,"span"),a(25),n()(),i(26,"p",6)(27,"span"),a(28),n(),p(29,Ne,2,1,"span"),n(),p(30,Fe,5,1,"p",4),n()(),i(31,"div",7),p(32,De,2,0,"span",8)(33,ke,4,1,"button",9),i(34,"div",10)(35,"button",11),h("click",function(){return s.onEditAddress()}),I(),i(36,"svg",12),c(37,"path",13),n()(),V(),i(38,"button",14),h("click",function(){return s.onDeleteDialogAction()}),I(),i(39,"svg",15),c(40,"path",16),n()()()()()(),V(),i(41,"p-dialog",17),p(42,Ve,12,1,"ng-template",18),n()),r&2&&(d(4),M(" ",s.address().name," "),d(6),C(s.address().deliveryAddress),d(5),C(s.address().city),d(5),C(s.address().state),d(5),C(s.address().country),d(3),C(s.address().phoneNumber),d(),u(s.address().additionalPhoneNumber?29:-1),d(),u(s.address().additionalInformation?30:-1),d(2),u(s.address().isDefault?32:33),d(9),Y(v(13,Ae)),m("visible",s.showDeleteDialog())("breakpoints",v(14,Se)))},dependencies:[_e,xe,ne,$],changeDetection:0});let e=o;return e})();var be=(()=>{let o=class o{constructor(){this.regex=new RegExp(/^[0-9+-]*$/)}onKeyDown(t){let r=t.key;t.key==="Backspace"||t.key==="Tab"||t.key==="ArrowLeft"||t.key==="ArrowRight"||t.ctrlKey||t.metaKey||this.regex.test(r)||t.preventDefault()}};o.\u0275fac=function(r){return new(r||o)},o.\u0275dir=Q({type:o,selectors:[["","appPhoneNumber",""]],hostBindings:function(r,s){r&1&&h("keydown",function(k){return s.onKeyDown(k)})},standalone:!0});let e=o;return e})();var Le=["addressInput"],Me=()=>["/","user","address-management"],w=e=>({"border-red-500":e}),Pe=()=>({width:"18px",border:"3px solid #fff"});function Re(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","firstName")}function qe(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","lastName")}function Be(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","phoneNumber")}function He(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","additionalPhoneNumber")}function je(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","deliveryAddress")}function $e(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","country")}function Ge(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","state")}function ze(e,o){e&1&&c(0,"p",12),e&2&&m("controlName","city")}function Ke(e,o){if(e&1&&(i(0,"div",33)(1,"label",37),c(2,"p-checkbox",38),q(3,"async"),i(4,"span",39),a(5,"Set as Default Address"),n()()()),e&2){let l,t=f();d(2),m("binary",!0)("readonly",((l=B(3,2,t.address$))==null?null:l.length)==0&&!t.activeAddress)}}function Qe(e,o){e&1&&c(0,"app-loader",36),e&2&&m("customStyle",v(1,Pe))}var Ce=(()=>{let o=class o{constructor(){this.addressService=x(E),this.fb=x(pe),this.toast=x(G),this.router=x(D),this.dialogService=x(ve),this.closeForm=L(),this.formMode=R(),this.isLoading=N(!1),this.addressTouched=L(),this.address$=this.addressService.getAddress()}ngOnInit(){let t=this.addressService.addressSignal(),r=!1;if(!t.length&&!this.activeAddress&&(r=!0),this.addressForm=this.fb.group({firstName:[null,[g.required,g.minLength(2)]],lastName:[null,[g.required,g.minLength(2)]],phoneNumber:[null,[g.required,this.addressService.phoneNumberValidator]],additionalPhoneNumber:[null,this.addressService.phoneNumberValidator],deliveryAddress:[null,[g.required]],additionalInformation:[null],country:[null,g.required],state:[null,g.required],city:[null,g.required],isDefault:[r]}),this.activeAddress=this.addressService.activeAddress(),this.activeAddress){let s=this.activeAddress?.name?.split(" ");this.addressForm.setValue({firstName:s[0],lastName:s[1],phoneNumber:this.activeAddress.phoneNumber,additionalPhoneNumber:this.activeAddress.additionalPhoneNumber,deliveryAddress:this.activeAddress.deliveryAddress,additionalInformation:this.activeAddress.additionalInformation,country:this.activeAddress.country,state:this.activeAddress.state,city:this.activeAddress.city,isDefault:this.activeAddress.isDefault})}this.addressForm.valueChanges.subscribe(()=>{this.addressForm.pristine||this.addressTouched.emit(!0)})}ngAfterViewInit(){let t=new google.maps.places.Autocomplete(this.addressInput.nativeElement,{types:["geocode"],componentRestrictions:{country:[]}});t.addListener("place_changed",()=>{this.addressForm.patchValue({deliveryAddress:t.getPlace().formatted_address});let r=t.getPlace().address_components,s=this.addressService.getLocationInfo(r);this.addressForm.patchValue({city:null,state:null,country:null}),this.patchInputs(s)})}onSubmit(){if(this.addressForm.valid){this.isLoading.set(!0);let t=P({},this.addressForm.value),r=t.firstName+" "+t.lastName;delete t.firstName,delete t.lastName,this.activeAddress?this.addressService.editAddress(z(P({},t),{name:r}),this.activeAddress.id).subscribe({next:s=>{this.isLoading.set(!1),this.toast.showToast({type:"success",message:"Address edited successfully!"}),this.closeForm.emit(),this.addressTouched.emit(!1),this.addressForm.reset()},error:s=>{this.isLoading.set(!1),this.toast.showToast({type:"error",message:s.error.message})}}):this.addressService.addAddress(z(P({},t),{name:r})).subscribe({next:s=>{this.isLoading.set(!1),this.toast.showToast({type:"success",message:"Address created successfully!"}),this.closeForm.emit(),this.addressForm.reset(),this.addressTouched.emit(!1)},error:s=>{this.isLoading.set(!1),this.toast.showToast({type:"error",message:s.error.message})}})}else this.addressForm.markAllAsTouched()}onCloseForm(){this.addressForm.pristine?this.closeForm.emit():confirm("You have unsaved changes, are you sure you want to quit?")&&(this.closeForm.emit(),this.addressTouched.emit(!1))}patchInputs(t){t.city!=""&&t.city&&this.addressForm.patchValue({city:t.city}),t.state!=""&&t.state&&this.addressForm.patchValue({state:t.state}),t.country!=""&&t.country&&this.addressForm.patchValue({country:t.country})}isInvalidAndTouched(t){let r=this.addressForm.get(t);return r?r.invalid&&r.touched:!1}ngOnDestroy(){this.activeAddress&&(this.addressService.activeAddress.set(null),this.activeAddress=null)}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=T({type:o,selectors:[["app-address-form"]],viewQuery:function(r,s){if(r&1&&J(Le,5),r&2){let b;X(b=Z())&&(s.addressInput=b.first)}},inputs:{formMode:[1,"formMode"]},outputs:{closeForm:"closeForm",addressTouched:"addressTouched"},standalone:!0,features:[F],decls:72,vars:39,consts:[["addressInput",""],[1,"flex","items-center","space-x-3"],[1,"h-8","w-8","flex","items-center","border-0","outline-0","justify-center","cursor-pointer",3,"click","routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"w-6"],["d","M7.4 273.4C2.7 268.8 0 262.6 0 256s2.7-12.8 7.4-17.4l176-168c9.6-9.2 24.8-8.8 33.9 .8s8.8 24.8-.8 33.9L83.9 232 424 232c13.3 0 24 10.7 24 24s-10.7 24-24 24L83.9 280 216.6 406.6c9.6 9.2 9.9 24.3 .8 33.9s-24.3 9.9-33.9 .8l-176-168z"],[1,"mt-6"],[1,"max-w-4xl","mx-auto","space-y-4",3,"ngSubmit","formGroup"],[1,"flex","items-start","flex-wrap","gap-4"],[1,"flex-1","min-w-[145px]","flex","flex-col"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"flex-grow"],["type","text","id","firstName","formControlName","firstName",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],["appErrorMessage","",1,"mt-1","text-sm","text-red-500","h-5",3,"controlName"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","lastName","formControlName","lastName",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],["for","phoneNumber",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","tel","id","phoneNumber","formControlName","phoneNumber","appPhoneNumber","",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],["for","additionalPhoneNumber",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","tel","id","additionalPhoneNumber","formControlName","additionalPhoneNumber",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],[1,"mb-6","flex","flex-col"],["for","deliveryAddress",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","deliveryAddress","formControlName","deliveryAddress",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],["for","additionalInformation",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","additionalInformation","formControlName","additionalInformation",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle"],[1,"mb-6","flex","flex-col","md:flex-row","md:space-x-4"],[1,"flex-1","mb-4","md:mb-0","flex","flex-col"],["for","country",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","country","formControlName","country",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],["for","state",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","state","formControlName","state",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],[1,"flex-1","flex","flex-col"],["for","city",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","city","formControlName","city",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],[1,"mb-6"],[1,"flex","justify-end"],["type","submit",1,"flex","items-center","space-x-2","px-4","py-2","bg-primary","text-white","rounded-md","hover:bg-opacity-80","focus:outline-none","disabled:bg-type_grey",3,"disabled"],[3,"customStyle"],[1,"inline-flex","items-center"],["formControlName","isDefault",3,"binary","readonly"],[1,"ml-2","text-sm","text-gray-700"]],template:function(r,s){if(r&1){let b=S();i(0,"div")(1,"div",1)(2,"button",2),h("click",function(){return _(b),y(s.onCloseForm())}),I(),i(3,"svg",3),c(4,"path",4),n()(),V(),i(5,"h3"),a(6),n()(),i(7,"div",5)(8,"form",6),h("ngSubmit",function(){return _(b),y(s.onSubmit())}),i(9,"div",7)(10,"div",8)(11,"label",9),a(12,"First Name"),n(),i(13,"div",10),c(14,"input",11),p(15,Re,1,1,"p",12),n()(),i(16,"div",8)(17,"label",13),a(18,"Last Name"),n(),i(19,"div",10),c(20,"input",14),p(21,qe,1,1,"p",12),n()()(),i(22,"div",7)(23,"div",8)(24,"label",15),a(25,"Phone Number"),n(),i(26,"div",10),c(27,"input",16),p(28,Be,1,1,"p",12),n()(),i(29,"div",8)(30,"label",17),a(31,"Additional Phone Number"),n(),i(32,"div",10),c(33,"input",18),p(34,He,1,1,"p",12),n()()(),i(35,"div",19)(36,"label",20),a(37,"Delivery Address"),n(),i(38,"div",10),c(39,"input",21,0),p(41,je,1,1,"p",12),n()(),i(42,"div",19)(43,"label",22),a(44,"Additional Information"),n(),i(45,"div",10),c(46,"input",23),n()(),i(47,"div",24)(48,"div",25)(49,"label",26),a(50,"Country"),n(),i(51,"div",10),c(52,"input",27),p(53,$e,1,1,"p",12),n()(),i(54,"div",25)(55,"label",28),a(56,"State"),n(),i(57,"div",10),c(58,"input",29),p(59,Ge,1,1,"p",12),n()(),i(60,"div",30)(61,"label",31),a(62,"City"),n(),i(63,"div",10),c(64,"input",32),p(65,ze,1,1,"p",12),n()()(),p(66,Ke,6,4,"div",33),i(67,"div",34)(68,"button",35),p(69,Qe,1,2,"app-loader",36),i(70,"span"),a(71,"Save Address"),n()()()()()()}r&2&&(d(2),m("routerLink",v(22,Me)),d(4),C(s.formMode()==="add"?"Add New Address":"Edit Address"),d(2),m("formGroup",s.addressForm),d(6),m("ngClass",A(23,w,s.isInvalidAndTouched("firstName"))),d(),u(s.isInvalidAndTouched("firstName")?15:-1),d(5),m("ngClass",A(25,w,s.isInvalidAndTouched("lastName"))),d(),u(s.isInvalidAndTouched("lastName")?21:-1),d(6),m("ngClass",A(27,w,s.isInvalidAndTouched("phoneNumber"))),d(),u(s.isInvalidAndTouched("phoneNumber")?28:-1),d(5),m("ngClass",A(29,w,s.isInvalidAndTouched("additionalPhoneNumber"))),d(),u(s.isInvalidAndTouched("additionalPhoneNumber")?34:-1),d(5),m("ngClass",A(31,w,s.isInvalidAndTouched("deliveryAddress"))),d(2),u(s.isInvalidAndTouched("deliveryAddress")?41:-1),d(11),m("ngClass",A(33,w,s.isInvalidAndTouched("country"))),d(),u(s.isInvalidAndTouched("country")?53:-1),d(5),m("ngClass",A(35,w,s.isInvalidAndTouched("state"))),d(),u(s.isInvalidAndTouched("state")?59:-1),d(5),m("ngClass",A(37,w,s.isInvalidAndTouched("city"))),d(),u(s.isInvalidAndTouched("city")?65:-1),d(),u(s.formMode()==="add"?66:-1),d(2),m("disabled",s.addressForm.invalid),d(),u(s.isLoading()?69:-1))},dependencies:[ue,le,re,de,ae,me,ce,te,ee,H,be,ye,he,fe,j,$],changeDetection:0});let e=o;return e})();var Oe=(e,o)=>o.id,Ye=()=>["/","user","address-management"],Ue=()=>({add:!0});function We(e,o){if(e&1){let l=S();i(0,"app-address-card",8),h("reloadAddress",function(){_(l);let r=f(4);return y(r.onReloadAddress())}),n()}if(e&2){let l=o.$implicit;m("address",l)}}function Je(e,o){if(e&1&&(i(0,"div",5),U(1,We,1,1,"app-address-card",7,Oe),n()),e&2){let l=f();d(),W(l)}}function Xe(e,o){e&1&&(i(0,"p",6),a(1," You haven't added any addresses yet. Add your first address to easily manage deliveries. "),n())}function Ze(e,o){if(e&1&&(i(0,"div",2)(1,"h1",3),a(2),n(),i(3,"button",4),a(4," Add New Address "),n()(),p(5,Je,3,0,"div",5)(6,Xe,2,0,"p",6)),e&2){let l=o;d(2),M(" Addresses (",l.length,") "),d(),m("routerLink",v(4,Ye))("queryParams",v(5,Ue)),d(2),u(l.length!==0?5:6)}}function et(e,o){e&1&&(i(0,"div",2),c(1,"p-skeleton",9)(2,"p-skeleton",9),n(),i(3,"div",10)(4,"div"),c(5,"p-skeleton",11),n(),i(6,"div"),c(7,"p-skeleton",11),n()())}function tt(e,o){if(e&1&&(p(0,Ze,7,6),q(1,"async"),p(2,et,8,0)),e&2){let l,t=f();u((l=B(1,1,t.addresses$))?0:2,l)}}function it(e,o){if(e&1){let l=S();i(0,"app-address-form",12),h("closeForm",function(){_(l);let r=f();return y(r.onCloseForm())})("addressTouched",function(r){_(l);let s=f();return y(s.isAddressTouched=r)}),n()}if(e&2){let l=f();m("formMode",l.addressFormMode)}}var Qt=(()=>{let o=class o{constructor(){this.router=x(D),this.route=x(ie),this.addressService=x(E),this.isAddingAddress=!1,this.addressFormMode="add",this.addresses$=this.addressService.getAddress(),this.isAddressTouched=!1,this.checkRoute()}onCloseForm(){this.isAddingAddress=!1,this.addresses$=this.addressService.getAddress(),this.router.navigateByUrl("/user/address-management")}onReloadAddress(){this.addresses$=this.addressService.getAddress()}checkRoute(){this.route.queryParams.subscribe(t=>{(t.edit||t.add)&&(this.isAddingAddress=!0),this.addressFormMode=Object.keys(t)[0]})}canDeactivate(){return this.isAddressTouched?confirm("You have unsaved changes, are you sure you want to quit?"):!0}unloadNotification(t){this.canDeactivate()||(t.returnValue=!0)}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=T({type:o,selectors:[["app-address"]],hostBindings:function(r,s){r&1&&h("beforeunload",function(k){return s.unloadNotification(k)},!1,O)},standalone:!0,features:[F],decls:3,vars:1,consts:[[1,""],[3,"formMode"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-base","mobile:text-2xl","font-medium"],[1,"bg-primary","text-xs","mobile:text-sm","hover:opacity-80","text-white","font-semibold","py-2","px-4","rounded",3,"routerLink","queryParams"],[1,"gap-6","grid","grid-cols-[repeat(auto-fill,minmax(280px,1fr))]","mobile:grid-cols-[repeat(auto-fill,minmax(305px,1fr))]"],[1,"text-type_grey","text-sm","mobile:text-base"],[3,"address"],[3,"reloadAddress","address"],["width","7rem","height","2rem"],[1,"gap-4","grid","grid-cols-[repeat(auto-fill,minmax(280px,1fr))]","mobile:grid-cols-[repeat(auto-fill,minmax(305px,1fr))]"],["width","100%","height","10rem"],[3,"closeForm","addressTouched","formMode"]],template:function(r,s){r&1&&(i(0,"div",0),p(1,tt,3,3)(2,it,1,1,"app-address-form",1),n()),r&2&&(d(),u(s.isAddingAddress?2:1))},dependencies:[ge,Ce,j,H,oe,se],changeDetection:0});let e=o;return e})();export{Qt as AddressComponent};

<div>
  <h1 class="text-type_title text-xl mobile:text-3xl">Reviews</h1>
  <div class="flex items-start space-x-4 mt-5">
    <div class="flex flex-col space-y-7">
      <div>
        <h3 class="text-type_title_gray text-xl mobile:2xl">Total Reviews</h3>
        <p
          class="text-type_title text-[35px] mobile:text-[50px] leading-[1] font-semibold"
        >
          {{ reviews().length }}
        </p>
      </div>

      <div>
        <h3 class="text-type_title_gray text-xl mobile:2xl">Average Rating</h3>
        <div class="flex items-center flex-col space-y-3">
          <div
            class="text-type_title text-[35px] mobile:text-[50px] leading-[1] font-semibold flex items-center"
          >
            <span>{{ averageRating() }}</span>
            <span class="font-normal">/5</span>
          </div>
          <div class="flex items-center space-x-1">
            @for (item of stars(); track item.star; let i = $index) {
              <div class="relative w-[25px] h-[25px]">
                <!-- Gray Star Icon -->
                <i
                  class="fa fa-star w-full h-full text-gray-300 text-[25px]"
                ></i>

                <!-- Yellow Overlay for Star Fill -->
                <i
                  class="fa fa-star h-full text-[25px] text-yellow-400 absolute top-0 left-0 overflow-hidden"
                  [ngStyle]="{ width: getStarWidth(i) }"
                ></i>
              </div>
            }
          </div>
        </div>
      </div>

      <div class="space-y-1">
        @for (count of ratingCounts(); track count.star; let i = $index) {
          <div class="flex items-center space-x-3">
            <div class="flex items-center space-x-1">
              <span>{{ count.star }}</span>
              <i class="fa fa-star text-yellow-400 text-lg"></i>
            </div>

            <div
              class="top-0 left-0 h-2 bg-yellow-400 rounded-lg"
              [ngStyle]="{
                width: count.totalRating
                  ? (count.totalRating / reviews().length) * 100 + '%'
                  : '3%',
              }"
            ></div>

            <p class="text-type_grey">{{ count.totalRating }}</p>
          </div>
        }
      </div>
    </div>
  </div>
</div>

@if (products$ | async; as products) {
  <div class="w-full">
    <div class="flex items-center justify-between space-x-3">
      <h3 class="text-base mobile:text-lg text-type_grey font-semibold">
        You May Also Like
      </h3>

      @if (products.length) {
        <div class="flex items-center space-x-4">
          <div
            class="w-12 h-12 rounded-full bg-bg_subtle flex items-center justify-center"
            [class.opacity-50]="!showLeftArrow"
            [class.cursor-not-allowed]="!showLeftArrow"
            [class.cursor-pointer]="showLeftArrow"
            (click)="scroll('left')"
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="-rotate-180"
            >
              <path
                d="M21.5627 14.6667L14.4107 7.51473L16.296 5.62939L26.6667 16.0001L16.296 26.3707L14.4107 24.4854L21.5627 17.3334H5.33337V14.6667H21.5627Z"
                fill="#555555"
              />
            </svg>
          </div>
          <div
            class="w-12 h-12 rounded-full bg-bg_subtle flex items-center justify-center"
            [class.opacity-50]="!showRightArrow"
            [class.cursor-not-allowed]="!showRightArrow"
            [class.cursor-pointer]="showRightArrow"
            (click)="scroll('right')"
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M21.5627 14.6667L14.4107 7.51473L16.296 5.62939L26.6667 16.0001L16.296 26.3707L14.4107 24.4854L21.5627 17.3334H5.33337V14.6667H21.5627Z"
                fill="#555555"
              />
            </svg>
          </div>
        </div>
      }
    </div>

    <div
      #carouselContainer
      class="overflow-x-auto space-x-4 scrollbar-hide scroll-smooth grid grid-flow-col auto-cols-[minmax(220px,230px)] gap-x-3 mt-3 hide-scrollbar w-full py-6 px-0 mobile:px-4"
    >
      @for (product of products; track product.id) {
        <app-product-card
          [product]="product"
          (seeDetails)="loadProductDetails.emit()"
        />
      } @empty {
        <p>No similar products available</p>
      }
    </div>
  </div>
} @else {
  <div class="flex items-center justify-between space-x-3">
    <h3 class="text-base mobile:text-lg text-type_grey font-semibold">
      You May Also Like
    </h3>
  </div>
  <div
    class="overflow-x-auto space-x-4 scrollbar-hide scroll-smooth grid grid-flow-col auto-cols-[minmax(220px,1fr)] gap-x-3 mt-3 hide-scrollbar w-full py-6"
  >
    @for (t of [1, 2, 3, 4]; track t) {
      <div class="flex flex-col space-y-1 mobile:space-y-3">
        <div class="relative w-full h-[180px] mobile:h-[230px]">
          <div
            class="absolute top-0 left-0 w-full h-full clip-polygon z-[100]"
            style="
              clip-path: polygon(
                0 18%,
                25% 0,
                100% 0,
                100% 82%,
                75% 100%,
                0% 100%
              );
            "
          >
            <p-skeleton width="100%" height="100%" />
          </div>
        </div>

        <div class="w-full">
          <div class="w-full mb-2">
            <p-skeleton width="100%" height="2rem" />
          </div>

          <div class="mb-4">
            <p-skeleton width="70%" height="1rem" />
          </div>

          <div class="flex items-center justify-between gap-x-2 gap-y-4">
            <div class="flex-1">
              <p-skeleton width="100%" height="2rem" />
            </div>

            <div class="flex-1">
              <p-skeleton width="100%" height="3rem" />
            </div>
          </div>
        </div>
      </div>
    }
  </div>
}

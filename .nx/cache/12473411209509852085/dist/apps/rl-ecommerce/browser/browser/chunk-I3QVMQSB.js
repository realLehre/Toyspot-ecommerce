import{a as ie}from"./chunk-ZSLJO3II.js";import{a as F}from"./chunk-73ZKYXDV.js";import{b as J,d as k,g as K,h as Y,l as Z,n as Q,o as W,s as X,u as ee}from"./chunk-HPREADP6.js";import{a as te}from"./chunk-ZFTML6IP.js";import{a as H,b as z}from"./chunk-JQIRRWHU.js";import{a as T}from"./chunk-HULGCXHD.js";import{a as R}from"./chunk-XNVULCNU.js";import{b as j,c as q}from"./chunk-JMTCKGXD.js";import{m as $}from"./chunk-BLPDBI5E.js";import{k as B,q as U}from"./chunk-BKPILUOD.js";import{$ as C,Ab as b,Db as f,Eb as x,Mb as n,Nb as _,Ob as S,Ta as o,Vb as E,Wb as G,X as u,Xb as w,ab as y,cc as A,dc as N,hb as c,j as D,ja as h,ka as g,kb as p,la as O,ma as V,pb as v,ua as M,ub as t,va as L,vb as e,wb as m}from"./chunk-RY22DRUR.js";import"./chunk-X5YLR3NI.js";import"./chunk-ODN5LVDJ.js";var P=i=>({"border-red-500":i}),ae=()=>({width:"18px",border:"3px solid #fff"});function le(i,r){i&1&&m(0,"p",6),i&2&&p("controlName","fullName")}function se(i,r){i&1&&m(0,"p",6),i&2&&p("controlName","email")}function de(i,r){i&1&&m(0,"p",6),i&2&&p("controlName","phoneNumber")}function me(i,r){i&1&&m(0,"app-loader",14),i&2&&p("customStyle",G(1,ae))}var ne=(()=>{let r=class r{constructor(){this.fb=u(X),this.addressService=u(F),this.toastService=u(te),this.userAccountService=u(T),this.cookieService=u(j),this.user=L.required(),this.cancelEdit=M(),this.isLoading=y(!1)}ngOnInit(){this.profileForm=this.fb.group({fullName:[this.user()?.name,k.required],email:[this.user()?.email,k.required],phoneNumber:[this.user()?.phoneNumber??null,[k.required,this.addressService.phoneNumberValidator]]})}onSubmit(){if(this.profileForm.valid){let d={name:this.profileForm.value.fullName,phoneNumber:this.profileForm.value.phoneNumber};this.isLoading.set(!0),this.userAccountService.updateUser(d).subscribe({next:l=>{localStorage.setItem(this.userAccountService.USER_ACCOUNT_STORAGE_KEY,JSON.stringify(l)),this.isLoading.set(!1),this.toastService.showToast({type:"success",message:"Profile updated!"}),this.cancelEdit.emit()},error:l=>{this.isLoading.set(!1),this.toastService.showToast({type:"error",message:l.error.message}),console.log(l)}})}}isInvalidAndTouched(d){let l=this.profileForm.get(d);return l?l.invalid&&l.touched:!1}};r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=C({type:r,selectors:[["app-overview-form"]],inputs:{user:[1,"user"]},outputs:{cancelEdit:"cancelEdit"},standalone:!0,features:[E],decls:30,vars:15,consts:[["addressInput",""],[1,"flex","flex-col",3,"ngSubmit","formGroup"],[1,"mb-6","flex","flex-col"],["for","fullName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"flex-grow"],["id","fullName","formControlName","fullName",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],["appErrorMessage","",1,"mt-1","text-sm","text-red-500","h-5",3,"controlName"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","formControlName","email","readonly","",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],["for","phoneNumber",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","phoneNumber","formControlName","phoneNumber",1,"w-full","px-3","py-2","border-[2px]","rounded-md","focus:outline-none","bg-bg_subtle",3,"ngClass"],[1,"flex","items-center","self-end","space-x-3"],["type","button",1,"px-4","py-2","bg-transparent","h-11","border-[2px]","border-primary","rounded-md","hover:border-type_grey","text-primary","hover:text-type_grey",3,"click"],["type","submit",1,"px-4","py-2","flex","items-center","space-x-2","bg-primary","h-11","text-white","rounded-md","hover:bg-opacity-80","focus:outline-none","disabled:bg-type_grey",3,"disabled"],[3,"customStyle"]],template:function(l,s){if(l&1){let I=b();t(0,"form",1),f("ngSubmit",function(){return h(I),g(s.onSubmit())}),t(1,"div")(2,"div",2)(3,"label",3),n(4,"Full Name"),e(),t(5,"div",4),m(6,"input",5,0),c(8,le,1,1,"p",6),e()(),t(9,"div",2)(10,"label",7),n(11,"Email"),e(),t(12,"div",4),m(13,"input",8,0),c(15,se,1,1,"p",6),e()(),t(16,"div",2)(17,"label",9),n(18,"Phone Number"),e(),t(19,"div",4),m(20,"input",10,0),c(22,de,1,1,"p",6),e()()(),t(23,"div",11)(24,"button",12),f("click",function(){return h(I),g(s.cancelEdit.emit())}),n(25," Cancel"),e(),t(26,"button",13),c(27,me,1,2,"app-loader",14),t(28,"span"),n(29,"Save"),e()()()()}l&2&&(p("formGroup",s.profileForm),o(6),p("ngClass",w(9,P,s.isInvalidAndTouched("fullName"))),o(2),v(s.isInvalidAndTouched("fullName")?8:-1),o(5),p("ngClass",w(11,P,s.isInvalidAndTouched("email"))),o(2),v(s.isInvalidAndTouched("email")?15:-1),o(5),p("ngClass",w(13,P,s.isInvalidAndTouched("phoneNumber"))),o(2),v(s.isInvalidAndTouched("phoneNumber")?22:-1),o(4),p("disabled",s.profileForm.invalid),o(),v(s.isLoading()?27:-1))},dependencies:[ie,ee,Z,J,K,Y,Q,W,B,R]});let i=r;return i})();function ce(i,r){if(i&1){let a=b();t(0,"div",4)(1,"div",6)(2,"h2",7),n(3,"Account Details"),e(),t(4,"button",8),f("click",function(){h(a);let l=x(2);return g(l.isEditingProfile.set(!0))}),O(),t(5,"svg",9),m(6,"path",10)(7,"path",11),e(),n(8," Edit "),e()(),V(),t(9,"div",12)(10,"div",13)(11,"div",14)(12,"p",15),n(13,"Name:"),e(),t(14,"p",16),n(15),e()(),t(16,"div",14)(17,"p",15),n(18,"Email:"),e(),t(19,"p",17),n(20),e()(),t(21,"div",14)(22,"p",15),n(23,"Phone:"),e(),t(24,"p",17),n(25),e()()()()()}if(i&2){let a=r;o(15),S(" ",a.name," "),o(5),_(a.email),o(5),S(" ",a.phoneNumber," ")}}function pe(i,r){i&1&&(t(0,"div"),m(1,"p-skeleton",18),e())}function ue(i,r){if(i&1&&(t(0,"span"),n(1),e()),i&2){let a=x();o(),S(" / ",a[0].additionalPhoneNumber," ")}}function ve(i,r){if(i&1&&(t(0,"p",23)(1,"span",24),n(2,"Extra:"),e(),t(3,"span"),n(4),e()()),i&2){let a=x();o(4),_(a[0].additionalInformation)}}function fe(i,r){if(i&1){let a=b();t(0,"div",5)(1,"div",6)(2,"h2",7),n(3,"Address Book"),e(),t(4,"button",8),f("click",function(){let l=h(a),s=x(2);return g(s.onEditAddress(l[0]))}),O(),t(5,"svg",9),m(6,"path",10)(7,"path",11),e(),n(8," Edit "),e()(),V(),t(9,"div",12)(10,"h3",19),n(11," Default Shipping Address "),e(),t(12,"address",20)(13,"h2",21),n(14),e(),t(15,"div",22)(16,"p",23)(17,"span",24),n(18,"Delivery address:"),e(),t(19,"span"),n(20),e()(),t(21,"p",23)(22,"span",24),n(23,"City:"),e(),t(24,"span"),n(25),e()(),t(26,"p",23)(27,"span",24),n(28,"State:"),e(),t(29,"span"),n(30),e()(),t(31,"p",23)(32,"span",24),n(33,"Country:"),e(),t(34,"span"),n(35),e()(),t(36,"p",25)(37,"span"),n(38),e(),c(39,ue,2,1,"span"),e(),c(40,ve,5,1,"p",23),e()()()()}if(i&2){let a=r;o(14),S(" ",a[0].name," "),o(6),_(a[0].deliveryAddress),o(5),_(a[0].city),o(5),_(a[0].state),o(5),_(a[0].country),o(3),_(a[0].phoneNumber),o(),v(a[0].additionalPhoneNumber?39:-1),o(),v(a[0].additionalInformation?40:-1)}}function xe(i,r){i&1&&(t(0,"div"),m(1,"p-skeleton",18),e())}function _e(i,r){if(i&1&&(t(0,"div",3),c(1,ce,26,3,"div",4),A(2,"async"),c(3,pe,2,0,"div")(4,fe,41,8,"div",5),A(5,"async"),c(6,xe,2,0,"div"),e()),i&2){let a,d,l=x();o(),v((a=N(2,2,l.user$))?1:3,a),o(3),v((d=N(5,4,l.address$))?4:6,d)}}function he(i,r){if(i&1){let a=b();t(0,"div")(1,"app-overview-form",26),A(2,"async"),f("cancelEdit",function(){h(a);let l=x();return g(l.onCancelProfileEdit())}),e()()}if(i&2){let a=x();o(),p("user",N(2,1,a.user$))}}var Re=(()=>{let r=class r{constructor(){this.authService=u(q),this.isEditingProfile=y(!1),this.userAccountService=u(T),this.addressService=u(F),this.router=u($),this.address$=this.addressService.getAddress(),this.user$=this.userAccountService.getUser()}onCancelProfileEdit(){this.isEditingProfile.set(!1),this.user$=D(this.userAccountService.userSignal())}onEditAddress(d){this.addressService.activeAddress.set(d),this.router.navigate(["/","user","address-management"],{queryParams:{edit:!0}})}test(){this.userAccountService.testEndPoint()}};r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=C({type:r,selectors:[["app-account-overview"]],standalone:!0,features:[E],decls:7,vars:2,consts:[[1,"w-full"],[1,"p-2","bg-red-600",3,"click"],[1,"text-base","mobile:text-2xl","font-medium","mb-6"],[1,"gap-6","grid","grid-cols-[repeat(auto-fill,minmax(280px,1fr))]","mobile:grid-cols-[repeat(auto-fill,minmax(305px,1fr))]"],[1,"rounded-lg","bg-bg_subtle","shadow-sm","hover:shadow-lg","hover:scale-105","transform","transition-all","duration-300","ease-in-out","overflow-hidden"],[1,"rounded-lg","bg-bg_subtle","shadow-sm","overflow-hidden","hover:shadow-lg","hover:scale-105","transform","transition-all","duration-300","ease-in-out"],[1,"px-6","py-4","flex","justify-between","items-center","border-b","border-gray-300"],[1,"text-lg","font-medium"],[1,"inline-flex","items-center","justify-center","rounded-md","text-sm","font-medium","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:opacity-50","disabled:pointer-events-none","ring-offset-background","bg-white","text-gray-900","shadow-sm","border","border-gray-200","hover:bg-gray-100","h-9","px-4","py-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-2"],["d","M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"],["d","m15 5 4 4"],[1,"p-6"],[1,"space-y-4"],[1,"flex","items-center","space-x-1"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-base","capitalize","w-full","break-words"],[1,"text-base","w-full","break-words"],["width","100%","height","220px"],[1,"text-sm","font-medium","text-primary","mb-2"],[1,"not-italic","text-base"],[1,"font-medium","text-gray-800"],[1,"space-y-1","mt-2","text-sm"],[1,"text-type_grey","break-words","space-x-1"],[1,"text-type_title_gray","font-medium"],[1,"text-type_caption","text-sm"],[3,"cancelEdit","user"]],template:function(l,s){l&1&&(t(0,"div",0)(1,"button",1),f("click",function(){return s.test()}),n(2,"Test"),e(),t(3,"h1",2),n(4),e(),c(5,_e,7,6,"div",3)(6,he,3,3,"div"),e()),l&2&&(o(4),S(" ",s.isEditingProfile()?"Edit Profile":"Account Overview"," "),o(),v(s.isEditingProfile()?6:5))},dependencies:[ne,U,z,H],changeDetection:0});let i=r;return i})();export{Re as AccountOverviewComponent};

import{a as p}from"./chunk-JMTCKGXD.js";import{b as h,c as u}from"./chunk-BLPDBI5E.js";import{M as a,R as n,X as g,ab as r,j as c}from"./chunk-RY22DRUR.js";var y=(()=>{let i=class i{constructor(){this.http=g(u),this.baseUrl=p.apiUrl+"product/",this.productSignal=r(null),this.activeProduct=r(null),this.paginationConfig=r(null),this.pageSize=r(10),this.searchedProductsSignal=r(null),this.isSearchingProducts=r(!1)}getProducts(t){let e=new h;return t?.categoryId&&(e=e.set("categoryId",t.categoryId)),t?.subCategoryId&&(e=e.set("subCategoryId",t.subCategoryId)),t?.minPrice&&(e=e.set("minPrice",t.minPrice.toString())),t?.maxPrice&&(e=e.set("maxPrice",t.maxPrice.toString())),t?.sortBy&&(e=e.set("sortBy",t.sortBy)),t?.page&&(e=e.set("page",t.page)),this.productSignal()?c(this.productSignal()):this.http.get(`${this.baseUrl}all`,{params:e}).pipe(a(o=>{this.paginationConfig.set({currentPage:o.currentPage,itemsPerPage:this.pageSize(),totalItems:o.totalItems,id:"productPagination"}),this.productSignal.set(o)}))}getProductById(t){return this.http.get(`${this.baseUrl}${t}`).pipe(a(e=>this.activeProduct.set(e)))}getSimilarProducts(t,e){return this.http.get(`${this.baseUrl}${e}/similar/${t}`)}getSearchedProducts(t){return this.isSearchingProducts.set(!0),this.searchedProductsSignal()?c(this.searchedProductsSignal()):this.http.get(`${this.baseUrl}?search=${t}`).pipe(a(e=>{this.searchedProductsSignal.set(e),this.isSearchingProducts.set(!1)})).subscribe()}createSlug(t){if(t)return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();export{y as a};
